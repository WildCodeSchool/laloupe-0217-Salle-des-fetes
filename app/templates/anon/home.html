<div id="map"></div>

<div class="container">
  <form class="marginTop" ng-submit="searchValid(searchText,searchRay,searchPeople)">
    <!-- <div class="row"> -->
    <div class="text center section">
      <h2>Trouver une salle à louer proche de chez vous</h2>
    </div>
    <div class="row marginTop">
      <div class="col l12 m12 s12">
        <div class="col l4 m4 s4 pitchBlack">
          <!-- <input type="text" autocomplete="off" placeholder="Où ?" class="validate" ng-model="searchCity" /> -->
          <md-input-content>
            <label class="label">Ville</label>
            <md-autocomplete flex placeholder="Où ?" md-search-text-change="change()" md-dropdown-items="2" md-input-minlength="2" md-input-maxlength="18" md-selected-item="selectedItem" md-search-text="searchText" md-items="salleDesFetes in filterCity(searchText)"
              md-item-text="salleDesFetes.city" md-require-match>
              <md-item-template>
                <span md-highlight-text="searchText">{{ salleDesFetes.city }}</span>
              </md-item-template>
              <md-not-found>
                Recherche introuvable.
              </md-not-found>
            </md-autocomplete>
          </md-input-content>
          <!-- <input type="text" placeholder="Où ?" id="autocomplete-input" class="autocomplete" ng-model="searchCity">
              <label class="autocomplete-input black-text active">Ville ou code postal  :</label> -->
        </div>

        <div class="input-field col l4 m4 s4 pitchBlack">
          <select ng-model="searchRay" ng-change="change()">
                      <option value="" disabled selected>Km</option>
                      <option  value="5">5</option>
                      <option  value="10">10</option>
                      <option  value="20">20</option>
                      <option  value="30">30</option>
                      <option  value="50">50</option>
                    </select> {{ raySearch }}
          <label class="black-text label">Rayon de recherche</label>
        </div>

        <div class="input-field col l4 m4 s4 pitchBlack" class="active">
          <select ng-model="searchPeople" ng-change="change()">
                      <option value="" disabled selected>Combien</option>
                      <option value="50">50</option>
                      <option value="100">100</option>
                      <option value="150">150</option>
                      <option value="250">250</option>
                      <option value="500">500</option>
                    </select>
          <label class="black-text label">Nbr de personnes : </label>
        </div>
      </div>
      <div class="" ng-repeat="peopleSearch in peopleSearchs track by $index">
        {{ peopleSearch.capacity }} {{ peopleSearch.city }}
      </div>
    </div>
    <!-- </div> -->
    <div class="row marginTop">
      <div class="col l12 m12 s12 text center">
        <button type="submit" class="btn-large waves-effect waves-light light-green btn"><b>Lancer votre recherche</b>
                  <i class="material-icons right">search</i>
                </button>
      </div>
    </div>
    <div class="row marginTop">
      <div class="col l12 m12 s12">
        <table ng-show="searchShow" class="striped">
          <thead>
            <tr>
              <th>Lien</th>
              <th>Ville</th>
              <th>Text descriptif</th>
              <th>Capacité</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="city in cities">
              <!-- <td><button class="btn" data-target="modal11" ng-click="clickSalle(city._id)" type="submit">test</button></td> -->
              <td><a data-target="modal11" ng-click="clickSalle(city._id)" href="" type="submit" name="button"><img src="./img/imageSalle.jpg" alt="Salle Des Fêtes de la {{city.city}}" width="20%"></a></td>
              <td>{{ city.city }}</td>
              <td>{{ city.text }}</td>
              <td>{{ city.capacity }}</td>
            </tr>
          </tbody>
          <tbody>
            <tr ng-repeat="sdfRadiusFilter in sdfRadiusFilters">
              <td><button class="btn" data-target="modal11" ng-click="click(sdfRadiusFilter._id)" type="submit">test</button></td>
              <td>{{ sdfRadiusFilter.city }}</td>
              <td>{{ sdfRadiusFilter.text }}</td>
              <td>{{ sdfRadiusFilter.capacity }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div id="modal11" class="modal modal-fixed-footer">
      <div class="modal-content">
        <div class="row">
          <div class="col l4 m4 s4">
            <div class="slider">
              <ul class="slides">
                <li>
                  <img src="./upload/{{ uploadImg }}">
                </li>
              </ul>
            </div>
            <h5 class="center-align"><b>Nom de la salle : {{ ville.name }}</b></h5>
            <p class="center-align"><b>Adresse</b></p>
            <p class="center-align toUpperCasse">{{ ville.adress }} {{ ville.postalCode }} {{ ville.city }}</p>
            <p class="center-align"><b>Tarif/Jour</b></p>
            <p class="center-align">{{ ville.price }} €</p>
          </div>
          <div class="col l8 m8 s8 styleModalBorder">

              <h4><b>Ville : </b><b class="toUpperCasse">{{ ville.city }}</b></h4>
              <p class="marginModaleHome"><b>Descriptif de la salle : </b>{{ ville.text }}</p>
              <p><b>Capacitée : </b>{{ ville.capacity }}</p>
              <p><b>Superficie : </b>{{ ville.surface }}</p>

          </div>
        </div>
      </div>

      <div class="modal-footer centerBtnFooter">
        <div class="row">
          <div class="col l4 m4 s4">
            <button class="btn waves-effect waves-light brown centerBtn" type="button" name="button">Calendrier</button>
          </div>

          <div class="col l4 m4 s4">
            <button class="btn waves-effect waves-light light-green centerBtn" ng-click="sendMail(ville._id)" type="button" name="button">Envoie mail</button>
          </div>

          <div class="col l4 m4 s4">
            <button class="btn waves-effect waves-light modal-close orange lighten-2 centerBtn">Fermer</button>
          </div>
        </div>
      </div>
    </div>


    <div class="row marginTop">
      <div class="col l12 m12 s12">
        <div map-lazy-load="https://maps.google.com/maps/api/js?&key=AIzaSyBETHBl-6Bcvkwx2vwUgHz4HnAvaJiLE7M">
          <ng-map center="48.4710,1.01417" zoom="11">
            <div ng-repeat="salleDesFetes in sallesDesFetes">
              <info-window id="window">
                <div ng-non-bindable="">
                  <h4>{{sdf.name}}</h4> Ville: {{sdf.city}}</br>
                  Adresse: {{sdf.adress}}</br>
                  Code postal: {{sdf.postalCode}}</br>
                  <article class="">
                    capacit&eacute {{sdf.capacity}} personnes</br>
                    {{sdf.surface}}m&sup2</br>{{sdf.text}}
                  </article>
                </div>
              </info-window>
              <marker id="{{salleDesFetes._id}}" on-click="showStore(event, $index)" position="{{salleDesFetes.adress}}, {{salleDesFetes.city}}, {{salleDesFetes.postalCode}}, France">
              </marker>
            </div>
          </ng-map>
        </div>
      </div>
    </div>
  </form>
</div>
